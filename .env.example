# ============================================================================
# Pravado Platform Environment Configuration
# ============================================================================
# Copy this file to .env.local and fill in your values.
# Required variables are marked with [REQUIRED].
#
# For local development, you typically only need:
#   - Supabase credentials (SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY, SUPABASE_ANON_KEY)
#   - LLM API key (LLM_OPENAI_API_KEY or LLM_ANTHROPIC_API_KEY)
# ============================================================================

# ============================================================================
# GENERAL
# ============================================================================

# Environment mode: development | production | test
NODE_ENV=development

# Logging level: debug | info | warn | error
LOG_LEVEL=info

# ============================================================================
# API SERVER (@pravado/api)
# ============================================================================

# API server port (default: 3001)
API_PORT=3001

# API server host (default: localhost)
API_HOST=localhost

# CORS origin for browser requests (default: http://localhost:3000)
CORS_ORIGIN=http://localhost:3000

# Cookie encryption secret (change in production!)
COOKIE_SECRET=pravado-cookie-secret-change-me

# Dashboard URL for email links (default: http://localhost:3000)
DASHBOARD_URL=http://localhost:3000

# ============================================================================
# SUPABASE [REQUIRED]
# ============================================================================
# Get these from your Supabase project settings:
# https://supabase.com/dashboard/project/_/settings/api

# [REQUIRED] Supabase project URL
SUPABASE_URL=https://your-project.supabase.co

# [REQUIRED] Supabase service role key (server-side only, never expose to client)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# [REQUIRED] Supabase anonymous/public key
SUPABASE_ANON_KEY=your-anon-key

# ============================================================================
# LLM PROVIDER CONFIGURATION
# ============================================================================
# Provider: openai | anthropic | stub (default: stub)
# Set to 'stub' for development without real LLM calls

LLM_PROVIDER=stub

# OpenAI Configuration (if LLM_PROVIDER=openai)
LLM_OPENAI_API_KEY=sk-your-openai-api-key
LLM_OPENAI_MODEL=gpt-4o-mini

# Anthropic Configuration (if LLM_PROVIDER=anthropic)
LLM_ANTHROPIC_API_KEY=sk-ant-your-anthropic-key
LLM_ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# LLM request settings
LLM_TIMEOUT_MS=20000
LLM_MAX_TOKENS=2048

# ============================================================================
# DATABASE (optional - uses Supabase by default)
# ============================================================================

# Direct PostgreSQL connection (optional, for migrations)
# DATABASE_URL=postgresql://user:password@localhost:5432/pravado_v2

# Redis URL for caching/queues (optional)
# REDIS_URL=redis://localhost:6379

# ============================================================================
# EMAIL PROVIDER (optional)
# ============================================================================
# If not configured, emails are logged to console in development

# MAILGUN_API_KEY=your-mailgun-api-key
# MAILGUN_DOMAIN=mg.yourdomain.com
# MAILGUN_FROM_EMAIL=noreply@yourdomain.com

# ============================================================================
# BILLING & STRIPE (optional)
# ============================================================================
# Only required if ENABLE_STRIPE_BILLING feature flag is true

BILLING_DEFAULT_PLAN_SLUG=internal-dev

# Stripe secret key (server-side)
# STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key

# Stripe webhook secret for verifying webhook signatures
# STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret

# Stripe Price IDs for subscription plans
# STRIPE_PRICE_STARTER=price_starter_id
# STRIPE_PRICE_GROWTH=price_growth_id
# STRIPE_PRICE_ENTERPRISE=price_enterprise_id

# Billing portal return URL
# BILLING_PORTAL_RETURN_URL=http://localhost:3000/app/billing

# ============================================================================
# AUDIT & COMPLIANCE (optional)
# ============================================================================

# Directory for audit export files (default: /tmp/audit_exports)
AUDIT_EXPORT_STORAGE_DIR=/tmp/audit_exports

# ============================================================================
# DASHBOARD (@pravado/dashboard)
# ============================================================================

# [REQUIRED] API URL for the dashboard to call
NEXT_PUBLIC_API_URL=http://localhost:3001

# [REQUIRED] Supabase URL (public, for client-side auth)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co

# [REQUIRED] Supabase anon key (public, for client-side auth)
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# Dashboard URL for invite links
NEXT_PUBLIC_DASHBOARD_URL=http://localhost:3000

# Stripe publishable key (public, for client-side)
# NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key

# ============================================================================
# MOBILE APP (@pravado/mobile) - optional
# ============================================================================

# API URL for mobile app
EXPO_PUBLIC_API_URL=http://localhost:3001

# ============================================================================
# FEATURE FLAGS (optional overrides)
# ============================================================================
# Feature flags are defined in @pravado/feature-flags.
# You can override defaults here if needed.
# See packages/feature-flags/src/flags.ts for all available flags.

# Examples:
# ENABLE_DEBUG_MODE=true
# ENABLE_SCHEDULER=false
# ENABLE_LLM=true
